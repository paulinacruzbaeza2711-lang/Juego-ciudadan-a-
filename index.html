<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego: Ciudadan√≠a Digital Responsable</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #6dd5fa, #2980b9);
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 650px;
      margin: 30px auto;
      padding: 20px;
      background: rgba(0,0,0,0.6);
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    h1, h2 {
      margin-bottom: 15px;
    }
    button {
      background: #27ae60;
      color: #fff;
      border: none;
      padding: 12px 20px;
      margin-top: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #2ecc71;
    }
    .hidden { display: none; }
    .emoji {
      font-size: 60px;
      margin: 10px auto;
      display: block;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #3498db;
      margin: 8px 0;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }
    li:hover { background: #2980b9; }
    #ranking ol { text-align: left; margin-top: 20px; }
    #mensaje {
      margin-top: 15px;
      font-style: italic;
      background: rgba(255,255,255,0.1);
      padding: 10px;
      border-radius: 8px;
    }
    #timer {
      font-size: 18px;
      margin: 10px 0;
      font-weight: bold;
      color: #ffeb3b;
    }
  </style>
</head>
<body>
  <!-- Registro -->
  <div class="container" id="registro">
    <h1>Ciudadan√≠a Digital Responsable</h1>
    <p>Reg√≠strate para comenzar el juego</p>
    <input type="text" id="nombreJugador" placeholder="Ingresa tu nombre" />
    <br>
    <button onclick="iniciarJuego()">Comenzar</button>
  </div>

  <!-- Juego -->
  <div class="container hidden" id="juego">
    <h2 id="saludo"></h2>
    <span class="emoji" id="emojiPersonaje">üë©‚Äçüíª</span>
    <div id="pregunta"></div>
    <div id="timer"></div>
    <ul id="opciones"></ul>
    <div id="mensaje" class="hidden"></div>
  </div>

  <!-- Final -->
  <div class="container hidden" id="final">
    <h2>¬°Juego terminado! üéâ</h2>
    <p id="resultado"></p>
    <button onclick="mostrarRanking()">Ver Ranking</button>
  </div>

  <!-- Ranking -->
  <div class="container hidden" id="ranking">
    <h2>Ranking de Jugadores üèÜ</h2>
    <ol id="listaRanking"></ol>
    <button onclick="reiniciar()">Jugar de nuevo</button>
  </div>

  <script>
    const preguntas = [
      {texto:"Si ves un comentario ofensivo en redes sociales, ¬øqu√© deber√≠as hacer?",
       opciones:[{texto:"Ignorar o reportar el comentario",correcta:true},
                 {texto:"Responder con otro insulto",correcta:false},
                 {texto:"Compartirlo para burlarse",correcta:false}],
       emoji:"üëÆ‚Äç‚ôÄÔ∏è", consejo:"Siempre reporta o ignora los comentarios ofensivos. Responder con violencia solo empeora la situaci√≥n.", dificultad:"f√°cil"},
      {texto:"La huella digital es:",
       opciones:[{texto:"Las publicaciones, fotos y datos que dejas en internet",correcta:true},
                 {texto:"Tus zapatos favoritos",correcta:false},
                 {texto:"Un videojuego famoso",correcta:false}],
       emoji:"üßë‚Äçüíª", consejo:"Todo lo que compartes en internet forma tu huella digital y afecta tu reputaci√≥n.", dificultad:"f√°cil"},
      {texto:"¬øCu√°l es un uso √©tico de internet?",
       opciones:[{texto:"Dar cr√©ditos al autor de la informaci√≥n",correcta:true},
                 {texto:"Copiar y pegar trabajos sin citar",correcta:false},
                 {texto:"Compartir informaci√≥n falsa",correcta:false}],
       emoji:"üßë‚Äçüè´", consejo:"Usar internet de forma √©tica significa respetar el trabajo de los dem√°s y siempre citar tus fuentes.", dificultad:"media"},
      {texto:"Respetar la diversidad en l√≠nea significa:",
       opciones:[{texto:"Aceptar diferentes opiniones e identidades",correcta:true},
                 {texto:"Burlarse de quien piensa distinto",correcta:false},
                 {texto:"Excluir a los dem√°s",correcta:false}],
       emoji:"üßë‚Äçüéì", consejo:"La convivencia digital responsable se basa en el respeto y la inclusi√≥n. ¬°Todos merecemos un espacio seguro!", dificultad:"media"},
      {texto:"Si recibes un mensaje sospechoso con un enlace desconocido, ¬øqu√© deber√≠as hacer?",
       opciones:[{texto:"No abrirlo y reportarlo",correcta:true},
                 {texto:"Abrirlo para ver qu√© es",correcta:false},
                 {texto:"Compartirlo con tus amigos",correcta:false}],
       emoji:"üîí", consejo:"Nunca abras enlaces sospechosos. Pueden ser intentos de phishing que ponen en riesgo tu seguridad.", dificultad:"dif√≠cil"},
      {texto:"¬øCu√°l de estas acciones afecta negativamente tu reputaci√≥n en l√≠nea?",
       opciones:[{texto:"Publicar comentarios ofensivos",correcta:true},
                 {texto:"Compartir informaci√≥n confiable",correcta:false},
                 {texto:"Respetar a otros usuarios",correcta:false}],
       emoji:"üåê", consejo:"Tu reputaci√≥n en l√≠nea es como una huella permanente. Piensa antes de publicar algo ofensivo.", dificultad:"dif√≠cil"},
      {texto:"¬øQu√© significa la netiqueta en la ciudadan√≠a digital?",
       opciones:[{texto:"Conjunto de normas de respeto y comportamiento en internet",correcta:true},
                 {texto:"Un tipo de virus inform√°tico",correcta:false},
                 {texto:"Una red social poco conocida",correcta:false}],
       emoji:"üìò", consejo:"La netiqueta ayuda a mantener una convivencia digital basada en el respeto mutuo.", dificultad:"media"},
      {texto:"¬øQu√© deber√≠as hacer antes de compartir una noticia en redes sociales?",
       opciones:[{texto:"Verificar que provenga de una fuente confiable",correcta:true},
                 {texto:"Compartirla inmediatamente",correcta:false},
                 {texto:"Editar el t√≠tulo para hacerlo m√°s llamativo",correcta:false}],
       emoji:"üì∞", consejo:"Siempre verifica la fuente antes de compartir informaci√≥n, as√≠ evitas la desinformaci√≥n.", dificultad:"media"},
      {texto:"Un ejemplo de ciberacoso es:",
       opciones:[{texto:"Enviar mensajes ofensivos repetidamente",correcta:true},
                 {texto:"Felicitaciones en p√∫blico",correcta:false},
                 {texto:"Dar un 'me gusta' a una publicaci√≥n",correcta:false}],
       emoji:"üö®", consejo:"El ciberacoso es un problema grave. Denuncia y apoya a quienes lo sufren.", dificultad:"dif√≠cil"},
      {texto:"Si publicas informaci√≥n personal como tu direcci√≥n en internet:",
       opciones:[{texto:"Te expones a riesgos de seguridad",correcta:true},
                 {texto:"Ganas m√°s amigos en l√≠nea",correcta:false},
                 {texto:"Apareces en m√°s b√∫squedas",correcta:false}],
       emoji:"‚ö†Ô∏è", consejo:"Nunca publiques informaci√≥n personal sensible. Protege tu privacidad.", dificultad:"dif√≠cil"}
    ];

    let jugador = "";
    let puntaje = 0;
    let indice = 0;
    let tiempoRestante = 0;
    let temporizador;
    let tiempoInicial = 0;
    let ganoExtra = false;

    function iniciarJuego() {
      const nombre = document.getElementById("nombreJugador").value.trim();
      if (nombre === "") {
        alert("Por favor ingresa tu nombre");
        return;
      }
      jugador = nombre;
      document.getElementById("registro").classList.add("hidden");
      document.getElementById("juego").classList.remove("hidden");
      document.getElementById("saludo").innerText = "¬°Bienvenido, " + jugador + "!";
      mostrarPregunta();
    }

    function mostrarPregunta() {
      if (indice >= preguntas.length) {
        finalizarJuego();
        return;
      }

      const q = preguntas[indice];
      document.getElementById("pregunta").innerText = q.texto;
      document.getElementById("emojiPersonaje").innerText = q.emoji;
      document.getElementById("mensaje").classList.add("hidden");

      if (q.dificultad === "f√°cil") tiempoRestante = 5;
      if (q.dificultad === "media") tiempoRestante = 7;
      if (q.dificultad === "dif√≠cil") tiempoRestante = 10;

      tiempoInicial = tiempoRestante;
      actualizarTimer();

      clearInterval(temporizador);
      temporizador = setInterval(() => {
        tiempoRestante--;
        actualizarTimer();
        if (tiempoRestante <= 0) {
          clearInterval(temporizador);
          verificarRespuesta(false, "‚è∞ Se acab√≥ el tiempo. La pr√≥xima vez responde m√°s r√°pido.\n" + q.consejo, false);
        }
      }, 1000);

      const opcionesUl = document.getElementById("opciones");
      opcionesUl.innerHTML = "";

      const opcionesMezcladas = [...q.opciones].sort(() => Math.random() - 0.5);
      opcionesMezcladas.forEach(op => {
        const li = document.createElement("li");
        li.innerText = op.texto;
        li.onclick = () => {
          clearInterval(temporizador);
          verificarRespuesta(op.correcta, q.consejo, true);
        };
        opcionesUl.appendChild(li);
      });
    }

    function actualizarTimer() {
      document.getElementById("timer").innerText = "‚è≥ Tiempo restante: " + tiempoRestante + "s";
    }

    function verificarRespuesta(correcta, consejo, respondio) {
      const mensajeDiv = document.getElementById("mensaje");

      if (correcta && respondio) {
        puntaje++;
        if (tiempoRestante > tiempoInicial / 2) {
          puntaje++;
          ganoExtra = true;
          mensajeDiv.innerText = "‚úÖ ¬°Correcto! " + consejo + " ‚ö° ¬°Respuesta r√°pida! Punto extra ganado.";
        } else {
          mensajeDiv.innerText = "‚úÖ ¬°Correcto! " + consejo;
        }
      } else if (!correcta && respondio) {
        mensajeDiv.innerText = "‚ùå Respuesta incorrecta. Intenta nuevamente la pr√≥xima vez.\n" + consejo;
      } else {
        mensajeDiv.innerText = consejo;
      }

      mensajeDiv.classList.remove("hidden");

      setTimeout(() => {
        indice++;
        mostrarPregunta();
      }, 2500);
    }

    function finalizarJuego() {
      document.getElementById("juego").classList.add("hidden");
      document.getElementById("final").classList.remove("hidden");
      let mensajeFinal = "";
      if (puntaje >= preguntas.length * 1.5 / 2) {
        mensajeFinal = "üåü ¬°Excelente! Eres un verdadero ciudadano digital responsable.";
      } else if (puntaje >= preguntas.length / 2) {
        mensajeFinal = "üëç Muy bien, pero a√∫n puedes mejorar tu responsabilidad digital.";
      } else {
        mensajeFinal = "üí° Necesitas practicar m√°s sobre ciudadan√≠a digital.";
      }
      document.getElementById("resultado").innerText = 
        jugador + ", tu puntaje es: " + puntaje + "/" + (preguntas.length * 2) + ". " + mensajeFinal;

      let ranking = JSON.parse(localStorage.getItem("ranking")) || [];
      ranking.push({nombre: jugador, puntaje: puntaje, extra: ganoExtra});
      ranking.sort((a, b) => b.puntaje - a.puntaje);
      localStorage.setItem("ranking", JSON.stringify(ranking));
    }

    function mostrarRanking() {
      document.getElementById("final").classList.add("hidden");
      document.getElementById("ranking").classList.remove("hidden");
      const lista = document.getElementById("listaRanking");
      lista.innerHTML = "";
      let ranking = JSON.parse(localStorage.getItem("ranking")) || [];
      ranking.slice(0, 5).forEach(r => {
        const li = document.createElement("li");
        let simbolo = r.extra ? " ‚ö°" : "";
        li.innerText = r.nombre + simbolo + " - " + r.puntaje + " puntos";
        lista.appendChild(li);
      });
    }

    function reiniciar() {
      location.reload();
    }
  </script>
</body>
</html>
